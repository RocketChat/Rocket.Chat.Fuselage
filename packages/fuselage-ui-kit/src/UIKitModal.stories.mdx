import { action } from '@storybook/addon-actions';
import { Meta, Preview, Props, Story } from '@storybook/addon-docs/blocks';
import {
  Modal,
} from '@rocket.chat/fuselage';
import { UiKitModal, kitContext, defaultContext, UiKitComponent } from './';
import { Demo } from './Demo';
import { withKnobs, text, boolean, number } from "@storybook/addon-knobs";


<Meta title='UIKit/UiKitModal' parameters={{ jest: ['UiKitModal/spec'] }} decorators={[withKnobs]} />

# UI Kit Modal

<Preview>
  <Story name='Input'>
    <Demo visible={boolean('visible', true) ? 1 : 0}>
      <kitContext.Provider value={{...defaultContext, errors: {'input-test': text('error', 'asdas') } }}>
       <UiKitComponent render={UiKitModal} blocks={[{
          "type": "input",
          "element": {
            "type": "plain_text_input",
            "actionId": "input-test",
            "placeholder": {
              "text": "plain_text_input",
              text: text('placeholder', 'asdas')
            }
          },
          "label": {
            "type": "plain_text",
            "text": "Label",
            "emoji": true
          }
        }]}/>
      </kitContext.Provider>
    </Demo>
  </Story>
</Preview>

<Preview>
  <Story name='Input Multiline'>
    <Demo visible={boolean('visible', true) ? 1 : 0}>
    <kitContext.Provider value={{...defaultContext, errors: {'input-test': text('error', 'asdas') } }}>
      <UiKitComponent render={UiKitModal} blocks= {[{
			"type": "input",
			"element": {
				"type": "plain_text_input",
				"multiline": true,
        "actionId": "input-test"
			},
			"label": {
				"type": "plain_text",
				"text": "Label",
				"emoji": true
			}
		}]}/>
    </kitContext.Provider>
  </Demo>
  </Story>
</Preview>



<Preview>
  <Story name='Input Datepicker'>
    <Demo visible={boolean('visible', true) ? 1 : 0}>
      <kitContext.Provider value={{...defaultContext, errors: {'input-test': text('error', 'asdas') } }}>
      <UiKitComponent render={UiKitModal} blocks= {[{
        "type": "input",
        "element": {
          "type": "datepicker",
          "initial_date": "1990-04-28",
          "actionId": "input-test",
          "placeholder": {
            "type": "plain_text",
            "text": "Select a date",
            "emoji": true
          }
        },
        "label": {
          "type": "plain_text",
          "text": "Label",
          "emoji": true
        }
		  }
    ]}/>
    </kitContext.Provider>
  </Demo>
  </Story>
</Preview>

<Preview>
  <Story name='Image'>
    <Demo visible={boolean('visible', true) ? 1 : 0}>
    {UiKitModal([{
			"type": "image",
			"title": {
				"type": "plain_text",
				"text": "Example Image",
				"emoji": true
			},
			"imageUrl": "https://raw.githubusercontent.com/RocketChat/Rocket.Chat.Artwork/master/Logos/icon-circle-256.png",
			"altText": "Example Image"
		}])}
  </Demo>
  </Story>
</Preview>

<Preview>
  <Story name='confirm button'>
    <Demo visible={boolean('visible', true) ? 1 : 0}>
    {UiKitModal([
		{
			"type": "actions",
			"elements": [
				{
					"type": "button",
					"text": {
						"type": "plain_text",
						"emoji": true,
						"text": "Approve"
					},
					"confirm": {
						"title": {
							"type": "plain_text",
							"text": "Are you sure?"
						},
						"text": {
							"type": "mrkdwn",
							"text": "Wouldn't you prefer a good game of _chess_?"
						},
						"confirm": {
							"type": "plain_text",
							"text": "Do it"
						},
						"deny": {
							"type": "plain_text",
							"text": "Stop, I've changed my mind!"
						}
					},
					"style": "primary",
					"value": "click_me_123"
				},
				{
					"type": "button",
					"text": {
						"type": "plain_text",
						"emoji": true,
						"text": "Deny"
					},
					"style": "danger",
					"value": "click_me_123"
				}
			]
		}
	])}
  </Demo>
  </Story>
</Preview>


<Preview>
  <Story name='Poll'>
    <Demo visible={boolean('visible', true) ? 1 : 0}>
    {UiKitModal([{
			"type": "input",
			"element": {
				"type": "plain_text_input"
			},
			"label": {
				"type": "plain_text",
				"text": "Insert your question",
				"emoji": true
			}
		},
		{
			"type": "divider"
		},
		{
			"type": "section",
			"text": {
				"type": "mrkdwn",
				"text": "*Add some choices*"
			}
		},
		{
			"type": "input",
			"element": {
				"type": "plain_text_input"
			},
			"label": {
				"type": "plain_text",
				"text": "Question 1",
				"emoji": true
			}
		},
		{
			"type": "input",
            "optional": true,
			"element": {
				"type": "plain_text_input"
			},
			"label": {
				"type": "plain_text",
				"text": "Question 2"
			}
		}])}
    </Demo>
  </Story>
</Preview>





<Preview>
  <Story name='live button'>
    <Demo visible={boolean('visible', true) ? 1 : 0}>
    {UiKitModal(JSON.parse(text('json', '[]')))}
  </Demo>
  </Story>
</Preview>

<Props of={UiKitModal}/>
