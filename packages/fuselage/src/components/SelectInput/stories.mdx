import { action } from '@storybook/addon-actions';
import { Meta, Preview, Props, Story } from '@storybook/addon-docs/blocks';
import LinkTo from '@storybook/addon-links/react';

import { PropsVariationSection } from '../../../.storybook/helpers';
import { Icon, SelectInput } from '../..';

<Meta title='Forms|Inputs/SelectInput' parameters={{ jest: ['SelectInput/spec'] }} />

# SelectInput

An input for selection of options.

<Preview>
  <Story name='Default'>
    <SelectInput>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

<Props of={SelectInput} />

## Multiple

While the default variant only allows one option and its rendered as a dropdown, the `multiple` prop flag enables
multiple selection of options.

<Preview>
  <Story name='Multiple'>
    <SelectInput multiple size={3} value={['b', 'c']}>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

## Props from <LinkTo kind='Forms|InputBox' story='Default Story'>`InputBox`</LinkTo>

Aside from `type`, any other prop from <LinkTo kind='Forms|InputBox' story='Default Story'>`InputBox`</LinkTo> can be
used.

### With Addon

There is a subtle difference in the way the `addon` prop is handled: it is ignored when `multiple` prop is `false`.

<Preview>
  <Story name='With Addon'>
    <SelectInput addon={<Icon name='discover' size='20' />}>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

<Preview>
  <Story name='Multiple With Addon'>
    <SelectInput multiple size={3} addon={<Icon name='discover' size='20' />}>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

### Invalid

<Preview>
  <Story name='Invalid'>
    <SelectInput error='Error'>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

### Disabled

<Preview>
  <Story name='Disabled'>
    <SelectInput disabled>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

### With placeholder

<Preview>
  <Story name='With Placeholder'>
    <SelectInput placeholder='Placeholder'>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

### With value

<Preview>
  <Story name='With Value'>
    <SelectInput defaultValue='b'>
      <SelectInput.Option value='a'>Item A</SelectInput.Option>
      <SelectInput.Option value='b'>Item B</SelectInput.Option>
      <SelectInput.Option value='c'>Item C</SelectInput.Option>
    </SelectInput>
  </Story>
</Preview>

## States

<Story name='States'>
  <PropsVariationSection
    component={SelectInput}
    common={{
      children: <>
        <SelectInput.Option value='a'>Item A</SelectInput.Option>
        <SelectInput.Option value='b'>Item B</SelectInput.Option>
        <SelectInput.Option value='c'>Item C</SelectInput.Option>
      </>,
      onChange: () => {},
    }}
    xAxis={{
      default: {},
      'with placeholder': { placeholder: 'Placeholder' },
      'with value': { value: 'b' },
      multiple: { multiple: true, size: 3 },
    }}
    yAxis={{
      default: {},
      hover: { className: 'hover' },
      active: { className: 'active' },
      focus: { className: 'focus' },
      disabled: { disabled: true },
      errored: { error: 'Error' },
      'errored + hover': { className: 'hover', error: 'Error' },
      'errored + active': { className: 'active', error: 'Error' },
      'errored + focus': { className: 'focus', error: 'Error' },
    }}
  />
</Story>
